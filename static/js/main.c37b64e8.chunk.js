(this.webpackJsonporario_elly=this.webpackJsonporario_elly||[]).push([[0],{18:function(e,t,n){e.exports=n(32)},23:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(6),o=n.n(i),l=(n(23),n(17)),c=n(3),u=n(4),d=n.n(u);function s(e){if(e)return e.celle.map((function(e){return{data:d()(e.data.split("-").reverse().join("-")),nome_insegnamento:e.nome_insegnamento,inizio:e.ora_inizio,fine:e.ora_fine,id_insegnamento:e.codice_insegnamento}}))}function p(e){var t=s(e);if(t){var n=t.filter((function(e){return d()().isSame(e.data,"day")}));return n.sort((function(e,t){return e.inizio<t.inizio?-1:0})),n}}function m(e){var t=s(e);if(t){var n=t.filter((function(e){return e.data.isAfter(d()())&&d()().isSame(e.data,"week")}));return n.sort((function(e,t){return e.data.isBefore(t.data)?-1:e.data.isSame(t.data,"day")?e.inizio<t.inizio?-1:0:1})),n}}function f(e){var t=s(e);if(t){var n=t.filter((function(e){return e.data.isAfter(d()().endOf("week"))}));return n.sort((function(e,t){return e.data.isBefore(t.data)?-1:e.data.isSame(t.data,"day")?e.inizio<t.inizio?-1:0:1})),n}}var g=n(5),h=n(14),E=Object(g.c)((function(e,t){switch(console.log(t),t.type){case"orario_elly/data/CHANGE_DATA":return t.payload;default:return e}}),Object(g.a)(h.a)),v=n(16),_=n(34),y=n(15),b=function e(){var t=this;Object(y.a)(this,e),this.getData=function(){if(!t.data){var n=localStorage.getItem(e.name);t.data=n?JSON.parse(n):{}}return t.data},this.setData=function(n,a){t.data[n]=a,localStorage.setItem(e.name,JSON.stringify(t.data))},this.getTipologia=function(e){return t.data[e]},this.getString=function(t){return e.values[t]||""},this.data=void 0};b.values=["","In diretta","Video su Elly"];var z,O=Object(a.createContext)(null),w=b,j=(z=function(e){var t=e.orari,n=e.categorieLezioni;return r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"Insegnamento"),r.a.createElement("th",null,"Orario"),r.a.createElement("th",null,"Modalit\xe0 lezione"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(S,{key:t,orario:e,categoriaSelezionata:n.getTipologia(e.id_insegnamento),handleChangeCategoria:function(t){return n.setData(e.id_insegnamento,t)}})}))))},function(e){return r.a.createElement(O.Consumer,null,(function(t){return r.a.createElement(z,Object.assign({},e,{categorieLezioni:t}))}))}),S=function(e){var t=e.orario,n=t.data,a=t.nome_insegnamento,i=t.inizio,o=t.fine,l=e.categoriaSelezionata,c=e.handleChangeCategoria;return r.a.createElement("tr",null,r.a.createElement("td",null,n&&n.format("DD/MM/YYYY")),r.a.createElement("td",null,a),r.a.createElement("td",null,i," - ",o),r.a.createElement("td",null,r.a.createElement("select",{value:l,onChange:function(e){var t=e.target.value;c(t)}},w.values.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e)})))))},D=Object(c.b)((function(e){return{isDataLoaded:null!=e}}),{fetchAPI:function(){return function(e){var t=new Headers;t.append("x-requested-with","XMLHttpRequest"),t.append("content-type","application/x-www-form-urlencoded; charset=UTF-8");var n=new URLSearchParams;return n.append("view","easycourse"),n.append("form-type","corso"),n.append("include","corso"),n.append("txtcurr","2 anno - Generale"),n.append("anno","2020"),n.append("corso","3050"),n.append("anno2[]","GEN|2"),n.append("date","21-09-2020"),n.append("periodo_didattico",""),n.append("_lang","it"),n.append("list","0"),n.append("week_grid_type","-1"),n.append("ar_codes_",""),n.append("ar_select_",""),n.append("col_cells","0"),n.append("empty_box","0"),n.append("only_grid","0"),n.append("highlighted_date","0"),n.append("all_events","0"),n.append("faculty_group","0"),n.append("all_events","1"),fetch("https://cors-anywhere.herokuapp.com/https://agendastudenti.unipr.it/grid_call.php",{method:"POST",headers:t,body:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(t){return e({type:"orario_elly/data/CHANGE_DATA",payload:t})})).catch((function(e){return console.error(e)}))}}})((function(e){var t=e.isDataLoaded,n=e.fetchAPI,i=Object(c.c)(p),o=Object(c.c)(m),l=Object(c.c)(f);return Object(a.useEffect)((function(){t||n()}),[t,n]),console.log(i),r.a.createElement(v.a,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Lezioni di oggi"),i&&i.length>0?r.a.createElement(j,{orari:i}):r.a.createElement("div",null,"Non ci sono lezioni per oggi"),r.a.createElement("hr",null),r.a.createElement("h1",null,"Lezioni della settimana"),o&&o.length>0?r.a.createElement(j,{orari:o}):r.a.createElement("div",null,"Non ci sono altre lezioni per questa settimana"),r.a.createElement("hr",null),r.a.createElement("h2",null,"Lezioni successive"),l&&l.length>0?r.a.createElement(j,{orari:l}):r.a.createElement("div",null,"Non ci sono altre lezioni")):r.a.createElement("h1",null,"Caricamento..."))}));var A=function(){var e=Object(a.useState)(new w),t=Object(l.a)(e,1)[0];return Object(a.useEffect)((function(){t&&t.getData()})),r.a.createElement(O.Provider,{value:t},r.a.createElement(c.a,{store:E},r.a.createElement(D,null)))};n(31);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.c37b64e8.chunk.js.map