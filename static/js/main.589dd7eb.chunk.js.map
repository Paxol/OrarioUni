{"version":3,"sources":["redux/data.js","redux/index.js","context/categorieLezioni.js","ContainerOrari/ContainerOrari.jsx","ContainerOrari/index.js","App.js","index.js"],"names":["selectOrarioLezioni","state","celle","map","c","data","moment","split","reverse","join","nome_insegnamento","inizio","ora_inizio","fine","ora_fine","id_insegnamento","codice_insegnamento","selectOrarioGiorno","orari","giornata","filter","isSame","sort","a","b","selectOrarioSettimana","settimana","isAfter","isBefore","selectOrarioSettimanaProssima","add","selectOrarioSuccessivo","altro","endOf","store","createStore","action","console","log","type","payload","applyMiddleware","ReduxThunk","CategorieLezioni","getData","loaded","localStorage","getItem","name","JSON","parse","setData","materia","tipologia","setItem","stringify","getTipologia","getString","values","this","undefined","Component","CategorieLezioniContext","createContext","sendNotification","config","window","showNotificationWithTrigger","remind","arrayLezioni","notificationCount","i","length","g","ore","minuti","timestamp","unix","tag","body","badge","icon","TabellaOrario","categorieLezioni","Table","striped","bordered","hover","responsive","o","key","orario","categoriaSelezionata","handleChangeCategoria","v","props","Consumer","Item","format","value","onChange","target","ContainerOrari","connect","isDataLoaded","fetchAPI","dispatch","myHeaders","Headers","append","urlencoded","URLSearchParams","fetch","method","headers","redirect","then","response","json","result","catch","error","useState","message","snackbar","setSnackbar","cancelId","setCancelId","giorno","useSelector","settimanaProssima","handleSnackbarClose","useEffect","clearTimeout","id","setTimeout","sendReminder","array","sent","total","Container","className","Alert","show","variant","Button","onClick","App","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.589dd7eb.chunk.js","sourcesContent":["import moment from 'moment';\r\n\r\n// ACTIONS\r\nconst CHANGE_DATA = \"orario_elly/data/CHANGE_DATA\";\r\n\r\nexport default function reducer(state, action) {\r\n\tconsole.log(action)\r\n\tswitch (action.type) {\r\n\t\tcase CHANGE_DATA:\r\n\t\t\treturn action.payload;\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport function fetchAPI() {\r\n\treturn (dispatch => {\r\n\t\tlet myHeaders = new Headers();\r\n\t\tmyHeaders.append(\"x-requested-with\", \"XMLHttpRequest\");\r\n\t\tmyHeaders.append(\"content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\r\n\r\n\t\tlet urlencoded = new URLSearchParams();\r\n\t\turlencoded.append(\"view\", \"easycourse\");\r\n\t\turlencoded.append(\"form-type\", \"corso\");\r\n\t\turlencoded.append(\"include\", \"corso\");\r\n\t\turlencoded.append(\"txtcurr\", \"2 anno - Generale\");\r\n\t\turlencoded.append(\"anno\", \"2020\");\r\n\t\turlencoded.append(\"corso\", \"3050\");\r\n\t\turlencoded.append(\"anno2[]\", \"GEN|2\");\r\n\t\turlencoded.append(\"date\", \"21-09-2020\");\r\n\t\turlencoded.append(\"periodo_didattico\", \"\");\r\n\t\turlencoded.append(\"_lang\", \"it\");\r\n\t\turlencoded.append(\"list\", \"0\");\r\n\t\turlencoded.append(\"week_grid_type\", \"-1\");\r\n\t\turlencoded.append(\"ar_codes_\", \"\");\r\n\t\turlencoded.append(\"ar_select_\", \"\");\r\n\t\turlencoded.append(\"col_cells\", \"0\");\r\n\t\turlencoded.append(\"empty_box\", \"0\");\r\n\t\turlencoded.append(\"only_grid\", \"0\");\r\n\t\turlencoded.append(\"highlighted_date\", \"0\");\r\n\t\turlencoded.append(\"all_events\", \"0\");\r\n\t\turlencoded.append(\"faculty_group\", \"0\");\r\n\t\turlencoded.append(\"all_events\", \"1\");\r\n\r\n\t\tlet requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: myHeaders,\r\n\t\t\tbody: urlencoded,\r\n\t\t\tredirect: 'follow'\r\n\t\t};\r\n\r\n\t\treturn fetch(\"https://cors-anywhere.herokuapp.com/https://agendastudenti.unipr.it/grid_call.php\", requestOptions)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(result => dispatch(changeData(result)))\r\n\t\t\t.catch(error => console.error(error));\r\n\t})\r\n}\r\n\r\nexport function changeData(data) {\r\n\treturn {\r\n\t\ttype: CHANGE_DATA,\r\n\t\tpayload: data\r\n\t}\r\n}\r\n\r\nexport function selectOrarioLezioni(state) {\r\n\tif (state) {\r\n\t\tconst orari = state.celle.map(c => {\r\n\t\t\tlet data = moment(c.data.split('-').reverse().join('-'))\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata,\r\n\t\t\t\tnome_insegnamento: c.nome_insegnamento,\r\n\t\t\t\tinizio: c.ora_inizio,\r\n\t\t\t\tfine: c.ora_fine,\r\n\t\t\t\tid_insegnamento: c.codice_insegnamento,\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn orari\r\n\t}\r\n}\r\n\r\nexport function selectOrarioGiorno(state) {\r\n\tconst orari = selectOrarioLezioni(state);\r\n\r\n\tif (orari) {\r\n\t\tconst giornata = orari.filter(c => moment().isSame(c.data, 'day'))\r\n\t\tgiornata.sort((a, b) => {\r\n\t\t\treturn (a.inizio < b.inizio) ? -1 : 0;\r\n\t\t})\r\n\t\treturn giornata;\r\n\t}\r\n}\r\n\r\nexport function selectOrarioSettimana(state) {\r\n\tconst orari = selectOrarioLezioni(state);\r\n\r\n\tif (orari) {\r\n\t\tconst settimana = orari.filter(c => c.data.isAfter(moment()) && moment().isSame(c.data, 'week'));\r\n\t\tsettimana.sort((a, b) => {\r\n\t\t\tif (a.data.isBefore(b.data)) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (a.data.isSame(b.data, 'day')) {\r\n\t\t\t\treturn (a.inizio < b.inizio) ? -1 : 0;\r\n\t\t\t} else return 1;\r\n\t\t});\r\n\r\n\t\treturn settimana;\r\n\t}\r\n}\r\n\r\nexport function selectOrarioSettimanaProssima(state) {\r\n\tconst orari = selectOrarioLezioni(state);\r\n\r\n\tif (orari) {\r\n\t\tconst settimana = orari.filter(c => moment().add(1, \"week\").isSame(c.data, 'week'));\r\n\t\tsettimana.sort((a, b) => {\r\n\t\t\tif (a.data.isBefore(b.data)) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (a.data.isSame(b.data, 'day')) {\r\n\t\t\t\treturn (a.inizio < b.inizio) ? -1 : 0;\r\n\t\t\t} else return 1;\r\n\t\t});\r\n\r\n\t\treturn settimana;\r\n\t}\r\n}\r\n\r\nexport function selectOrarioSuccessivo(state) {\r\n\tconst orari = selectOrarioLezioni(state);\r\n\r\n\tif (orari) {\r\n\t\tconst altro = orari.filter(c => c.data.isAfter(moment().endOf('week')))\r\n\t\taltro.sort((a, b) => {\r\n\t\t\tif (a.data.isBefore(b.data)) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (a.data.isSame(b.data, 'day')) {\r\n\t\t\t\treturn (a.inizio < b.inizio) ? -1 : 0;\r\n\t\t\t} else return 1;\r\n\t\t});\r\n\r\n\t\treturn altro\r\n\t}\r\n}\r\n\r\n","import dataReducer from './data';\r\n\r\nimport { createStore, applyMiddleware } from 'redux';\r\n\r\nimport ReduxThunk from 'redux-thunk'; \r\n\r\nexport const store = createStore(dataReducer, applyMiddleware(ReduxThunk))","import React, { createContext } from 'react';\r\n\r\nclass CategorieLezioni {\r\n    static values = [\"\", \"In diretta\", \"Video su Elly\"];\r\n\r\n    constructor() {\r\n        this.data = undefined;\r\n    }\r\n\r\n    getData = () => {\r\n        if (!this.data) {\r\n            const loaded = localStorage.getItem(CategorieLezioni.name);\r\n            if (loaded) {\r\n                this.data = JSON.parse(loaded);\r\n            } else {\r\n                this.data = {};\r\n            }\r\n        }\r\n\r\n        return this.data;\r\n    }\r\n\r\n    setData = (materia, tipologia) => {\r\n        this.data[materia] = tipologia;\r\n        localStorage.setItem(CategorieLezioni.name, JSON.stringify(this.data));\r\n    }\r\n\r\n    getTipologia = (materia) => {\r\n        return this.data[materia];\r\n    }\r\n\r\n    getString = (tipologia) => {\r\n        return CategorieLezioni.values[tipologia] || \"\";\r\n    }\r\n}\r\n\r\nconst CategorieLezioniContext = createContext(null);\r\nconst withCategorieLezioni = Component => props => (\r\n    <CategorieLezioniContext.Consumer>\r\n        {categorieLezioni => <Component {...props} categorieLezioni={categorieLezioni} />}\r\n    </CategorieLezioniContext.Consumer>\r\n)\r\n\r\nexport default CategorieLezioni;\r\nexport { CategorieLezioniContext, withCategorieLezioni };","import React, { useEffect, useState } from 'react';\n\nimport Container from 'react-bootstrap/Container';\nimport Alert from 'react-bootstrap/Alert';\n\nimport { connect, useSelector } from 'react-redux';\n\nimport { fetchAPI, selectOrarioGiorno, selectOrarioSettimana, selectOrarioSuccessivo, selectOrarioSettimanaProssima } from '../redux/data';\nimport { Table, Button } from 'react-bootstrap';\n\nimport CategorieLezioni, { withCategorieLezioni } from '../context/categorieLezioni';\n\nimport moment from 'moment';\n\nconst sendNotification = async (config) => {\n  return await window.showNotificationWithTrigger(config);\n}\n\nconst remind = async (arrayLezioni) => {\n  let notificationCount = 0;\n\n  for (let i = 0; i < arrayLezioni.length; i++) {\n    const g = arrayLezioni[i];\n    const [ore, minuti] = g.inizio.split(\":\");\n\n    const timestamp = moment(g.data).add(ore, 'hours').add(minuti - 5, 'minutes').unix();\n    const config = {\n      tag: timestamp, // a unique ID\n      body: `Lezione di ${g.nome_insegnamento} alle ${ore}:${minuti}`, // content of the push notification\n      badge: './logo192.png',\n      icon: './logo192.png',\n    };\n    let ok = await sendNotification(config);\n    if (ok) {\n      notificationCount++;\n    }\n  }\n\n  return [notificationCount, arrayLezioni.length];\n}\n\nconst ContainerOrari = ({ isDataLoaded, fetchAPI }) => {\n  const [snackbar, setSnackbar] = useState({\n    message: undefined,\n    type: undefined\n  });\n\n  const [cancelId, setCancelId] = useState(undefined);\n\n  const giorno = useSelector(selectOrarioGiorno);\n  const settimana = useSelector(selectOrarioSettimana);\n  const settimanaProssima = useSelector(selectOrarioSettimanaProssima);\n  const altro = useSelector(selectOrarioSuccessivo);\n\n  const handleSnackbarClose = () => {\n    setSnackbar({\n      message: undefined,\n      type: undefined\n    });\n    setCancelId(undefined);\n  };\n\n  useEffect(() => {\n    if (!isDataLoaded)\n      fetchAPI();\n  }, [isDataLoaded, fetchAPI]);\n\n  useEffect(() => {\n    if (snackbar.message) {\n      if (cancelId) clearTimeout(cancelId);\n      const id = setTimeout(handleSnackbarClose, 2500);\n      setCancelId(id);\n    }\n    // eslint-disable-next-line\n  }, [snackbar])\n\n  const sendReminder = (array) => {\n    remind(array).then(([sent, total]) => {\n      let type;\n      if (sent === 0) type = 'danger';\n      else if (sent > 0 && sent < total) type = 'warning';\n      else type = 'success';\n\n      setSnackbar({\n        message: `Programmati ${sent}/${total} promemoria`,\n        type\n      });\n    });\n  }\n\n  return (\n    <Container className=\"mt-3\">\n      {\n        isDataLoaded ? (\n          <>\n            <Alert show={snackbar.type !== undefined} variant={snackbar.type}>\n              <p>\n                {snackbar.message}\n              </p>\n            </Alert>\n\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <h1>Lezioni di oggi</h1>\n              <Button onClick={() => {\n                sendReminder(giorno);\n              }}>Ricordamelo</Button>\n            </div>\n            {\n              giorno && giorno.length > 0 ? (\n                <TabellaOrario orari={giorno} />\n              ) : (\n                  <div>Non ci sono lezioni per oggi</div>\n                )\n            }\n            <hr />\n\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <h2>Lezioni della settimana</h2>\n              <Button onClick={() => {\n                sendReminder(settimana);\n              }}>Ricordamelo</Button>\n            </div>\n            {\n              settimana && settimana.length > 0 ? (\n                <TabellaOrario orari={settimana} />\n              ) : (\n                  <div>Non ci sono altre lezioni per questa settimana</div>\n                )\n            }\n            <hr />\n\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <h2>Lezioni settimana prossima</h2>\n              <Button onClick={() => {\n                sendReminder(settimanaProssima);\n              }}>Ricordamelo</Button>\n            </div>\n            {\n              settimanaProssima && settimanaProssima.length > 0 ? (\n                <TabellaOrario orari={settimanaProssima} />\n              ) : (\n                  <div>Non ci sono lezioni per settimana prossima</div>\n                )\n            }\n            <hr />\n\n            <h3>Lezioni successive</h3>\n            {\n              altro && altro.length > 0 ? (\n                <TabellaOrario orari={altro} />\n              ) : (\n                  <div>Non ci sono altre lezioni</div>\n                )\n            }\n          </>\n        ) : (\n            <h1>Caricamento...</h1>\n          )\n      }\n    </Container>\n  )\n};\n\nconst TabellaOrario = withCategorieLezioni(({ orari, categorieLezioni }) => (\n  <Table striped bordered hover responsive>\n    <thead>\n      <tr>\n        <th>Data</th>\n        <th>Insegnamento</th>\n        <th>Orario</th>\n        <th>Modalità lezione</th>\n      </tr>\n    </thead>\n    <tbody>\n      {\n        orari.map((o, i) => <Item key={i} orario={o}\n          categoriaSelezionata={categorieLezioni.getTipologia(o.id_insegnamento)}\n          handleChangeCategoria={(v) => categorieLezioni.setData(o.id_insegnamento, v)} />)\n      }\n    </tbody>\n  </Table>\n));\n\nconst Item = ({ orario: { data, nome_insegnamento, inizio, fine }, categoriaSelezionata, handleChangeCategoria }) => (\n  <tr>\n    <td>{data && data.format(\"DD/MM/YYYY\")}</td>\n    <td>{nome_insegnamento}</td>\n    <td>{inizio} - {fine}</td>\n    <td>\n      <select value={categoriaSelezionata} onChange={({ target: { value } }) => {\n        handleChangeCategoria(value);\n      }}>\n        {\n          CategorieLezioni.values.map((c, i) => (\n            <option key={i} value={i}>{c}</option>\n          ))\n        }\n      </select>\n    </td>\n  </tr>\n);\n\nconst mapStateToProps = (state => {\n  return { isDataLoaded: state != null }\n});\n\nexport default connect(mapStateToProps, { fetchAPI })(ContainerOrari);\n","import ContainerOrari from './ContainerOrari';\n\nexport default ContainerOrari;\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './redux';\r\n\r\nimport ContainerOrari from './ContainerOrari';\r\n\r\nimport CategorieLezioni, { CategorieLezioniContext } from './context/categorieLezioni';\r\n\r\nfunction App() {\r\n  const [categorieLezioni] = useState(new CategorieLezioni())\r\n\r\n  useEffect(() => {\r\n    categorieLezioni && categorieLezioni.getData();\r\n  })\r\n\r\n  return (\r\n    <CategorieLezioniContext.Provider value={categorieLezioni}>\r\n      <Provider store={store}>\r\n        <ContainerOrari />\r\n      </Provider>\r\n    </CategorieLezioniContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}